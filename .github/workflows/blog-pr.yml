name: Auto Create Blog Post PR

on:
  issues:
    types: [opened]

jobs:
  create-blog-pr:
    runs-on: ubuntu-latest
    # Optional: Run only if the issue title starts with "[Blog Post]"
    if: startsWith(github.event.issue.title, '[Blog Post]')
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3

      - name: Extract Inputs from Issue Body
        id: extract
        shell: bash
        run: |
          # Save the issue body into a variable
          ISSUE_BODY="${{ github.event.issue.body }}"
          echo "Issue body:"
          echo "$ISSUE_BODY"

          # Parse each field from the issue body using grep and sed.
          # Adjust the regular expressions as needed based on your form output.
          BLOG_TITLE=$(echo "$ISSUE_BODY" | awk '/### Blog Title/{getline; print}' | xargs)
          echo "Blog Title:"
          echo "$BLOG_TITLE"
